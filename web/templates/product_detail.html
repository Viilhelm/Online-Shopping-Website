{% extends 'base.html' %}
{% load static %}
{% block title %}Product Detail{% endblock title %}
{% block main-content %}
    <div class="container">
        <div class="row flex justify-content-between">
            <div class="img2 col-lg-4 mt-3 mb-5">
                <img src="{{product.image.url}}" class="img col-xs-6 col-sm-12 col-lg-12 mt-1 mb-3 text-sm-center w-75 h-90" alt="">
            </div>
            <div class="productdetail col-lg-8">
                <h1> Name: 《{{product.productName}}》 </h1>
                <h5> Author: {{product.author}} </h5>
                <h5> Publisher: {{product.publisher}} </h5>
                <h5> Price: ${{product.price}} </h5>
                <h5> Category: {{product.category.categoryName}} </h5>
                <h5> ISBN: {{product.ISBN}} </h5>
                <h5> Introduction: {{product.introduction}} </h5>

                {% for group in request.user.groups.all %}
                    {% if group.name == 'Customer' %}
                        <form action="/cartAdd" class="d-inline">
                            <input type="hidden" id="product_id" name="product_id" value="{{product.id}}" />
                            <button type="sumbit" class="d-grid gap-2 btn btn-danger p-1 m-1 btn-1g text-decoration-none text-white" >Add to Cart</button>
                        </form>

                
                    {% endif %}
                {% endfor %}
            </div>
        </div>
        <header class="section-heading">
            <h3>Customer Reviews </h3>
            <div class="rating-star">
                <span>
                    <i class="fa fa-star{% if product.avgRating < 0.5 %}-o{% elif product.avgRating >= 0.5 and product.avgRating < 1 %}-half-o {% endif %}" aria-hidden="true"></i>
                    <i class="fa fa-star{% if product.avgRating  < 1.5 %}-o{% elif product.avgRating  >= 1.5 and product.avgRating < 2 %}-half-o {% endif %}" aria-hidden="true"></i>
                    <i class="fa fa-star{% if product.avgRating  < 2.5 %}-o{% elif product.avgRating >= 2.5 and product.avgRating < 3 %}-half-o {% endif %}" aria-hidden="true"></i>
                    <i class="fa fa-star{% if product.avgRating  < 3.5 %}-o{% elif product.avgRating >= 3.5 and product.avgRating < 4 %}-half-o {% endif %}" aria-hidden="true"></i>
                    <i class="fa fa-star{% if product.avgRating  < 4.5 %}-o{% elif product.avgRating >= 4.5 and product.avgRating < 5 %}-half-o {% endif %}" aria-hidden="true"></i>
           
                    </span>
            </div>
        
        </header>
        
        {% for review in items %}
                        <article class="box mb-3">
                            <div class="icontext w-100">
        
                                <div class="text">
                                    
                                    <h6 class="mb-1">{{review.order.user.username}} </h6>
                                    <div class="rating-star">
                                        <span>
                                            <i class="fa fa-star{% if review.myRate == 0.5 %}-half-o{% elif review.myRate < 1 %}-o {% endif %}" aria-hidden="true"></i>
                                            <i class="fa fa-star{% if review.myRate == 1.5 %}-half-o{% elif review.myRate < 2 %}-o {% endif %}" aria-hidden="true"></i>
                                            <i class="fa fa-star{% if review.myRate == 2.5 %}-half-o{% elif review.myRate < 3 %}-o {% endif %}" aria-hidden="true"></i>
                                            <i class="fa fa-star{% if review.myRate == 3.5 %}-half-o{% elif review.myRate < 4 %}-o {% endif %}" aria-hidden="true"></i>
                                            <i class="fa fa-star{% if review.myRate == 4.5 %}-half-o{% elif review.myRate < 5 %}-o {% endif %}" aria-hidden="true"></i>
                                        </span>
                                    </div>
                                </div>
                            </div> <!-- icontext.// -->
                            <div class="mt-3">
                                <p>
                                    {{review.myComment}}
                                </p>
                            </div>
                        </article>
        {% endfor %}
    </div>
{% endblock main-content %}
